{% extends "base.html.twig" %}

{% block title %}Index{% endblock %}

{% block body %}

    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2010"}) }}">Saison 2010</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2011"}) }}">Saison 2011</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2012"}) }}">Saison 2012</a>

    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2013"}) }}">Saison 2013</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2014"}) }}">Saison 2014</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2015"}) }}">Saison 2015</a>

    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2016"}) }}">Saison 2016</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2017"}) }}">Saison 2017</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2018"}) }}">Saison 2018</a>

    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2019"}) }}">Saison 2019</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2020"}) }}">Saison 2020</a>
    <a href="{{ path('drivers_most_winning_race_in_season', {'season': "2021"}) }}">Saison 2021</a>

    <div class="container-fluid" style="margin-top: 1%">
        <h3>Drivers with most victory in {{ season }}</h3>

        <script>
            var drivers = [];
            var wins = [];
        </script>
        {% for driverName, nbWins in drivers %}
            <p>{{ driverName }} wins {{ nbWins }} races </p>
            <script>
                drivers.push("{{ driverName }}");
                wins.push("{{ nbWins }}");
            </script>
        {% endfor %}

        <canvas id="pieChart" style="max-width: 1000px; max-height: 500px"></canvas>
    </div>

    <script>
        var ctxP = document.getElementById("pieChart").getContext('2d');
        var myPieChart = new Chart(ctxP, {
            type: 'pie',
            data: {
                labels: drivers,
                datasets: [{
                    data: wins,
                    backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C", "#949FB1", "#4D5360"],
                    hoverBackgroundColor: ["#FF5A5E", "#5AD3D1", "#FFC870", "#A8B3C5", "#616774"]
                }]
            },
            options: {
                responsive: true
            }
        });
    </script>
{% endblock %}
